---
layout: default
title: <%= title %>
parent: <%= parent || 'API Reference' %>
<% if has_children %>
has_children: true
<% end %>
nav_order: <%= nav_order %>
---

<h1 class="page-title"><%= h doc['path'] %> <span class="type-badge type-<%= doc['type'] %>"><%= doc['type']&.capitalize %></span></h1>

<% if doc['class_methods']&.any? || doc['instance_methods']&.any? || doc['attributes']&.any? %>
<nav class="page-subnav">
<% if doc['class_methods']&.any? %><a href="#class-methods">Class Methods (<%= doc['class_methods'].size %>)</a><% end %>
<% if doc['instance_methods']&.any? %><a href="#instance-methods">Instance Methods (<%= doc['instance_methods'].size %>)</a><% end %>
<% if doc['attributes']&.any? %><a href="#attributes">Attributes (<%= doc['attributes'].size %>)</a><% end %>
</nav>
<% end %>

<% if doc['superclass'] %>
<p><strong>Inherits:</strong> <a href="#inherited-from-<%= doc['superclass'].gsub('::', '-') %>"><code><%= h doc['superclass'] %></code></a></p>
<% end %>

<% if doc['class_mixins']&.any? %>
<p><strong>Extended by:</strong> <%= doc['class_mixins'].map { |m| "<code>#{h m}</code>" }.join(', ') %></p>
<% end %>

<% if doc['instance_mixins']&.any? %>
<p><strong>Includes:</strong> <%= doc['instance_mixins'].map { |m| "<code>#{h m}</code>" }.join(', ') %></p>
<% end %>

<% unless doc['docstring'].to_s.strip.empty? %>
<div class="docstring">
<%= md(doc['docstring']) %>
</div>
<% end %>

<% if children_list&.any? %>
<div class="children-section">
<h6><% if children_modules.any? %>Modules (<%= children_modules.size %>)<% end %><% if children_modules.any? && children_classes.any? %> · <% end %><% if children_classes.any? %>Classes (<%= children_classes.size %>)<% end %></h6>
<ul class="children-list">
<% children_list.each do |child| %>
<li><span class="badge <%= child[:type] == 'module' ? 'bg-success' : 'bg-primary' %>"><%= child[:type] == 'module' ? 'M' : 'C' %></span> <a href="{{ '/api/<%= child[:url] %>/' | relative_url }}"><%= h child[:name] %></a></li>
<% end %>
</ul>
</div>
<% end %>

<% if doc['inherited_methods']&.any? %>
<div class="inherited-section">
<h6>Inherited Methods</h6>
<%
  direct_sources = [doc['superclass'], *(doc['class_mixins'] || []), *(doc['instance_mixins'] || [])].compact
%>
<% doc['inherited_methods'].each do |source, methods| %>
<%
  via = nil
  unless direct_sources.include?(source)
    via = doc['superclass']
  end
%>
<div class="inherited-source" id="inherited-from-<%= source.gsub('::', '-') %>">
<span class="inherited-from">from <a href="{{ '/api/<%= source.gsub('::', '/') %>/' | relative_url }}"><%= h source %></a><% if via %> <span class="inherited-via">(via <%= h via %>)</span><% end %></span>
<ul class="inherited-list">
<% methods['class_methods']&.each do |m| %>
<li><a href="{{ '/api/<%= source.gsub('::', '/') %>/' | relative_url }}#class-method-<%= m %>" class="inherited-class-method">.<%= h m %></a></li>
<% end %>
<% methods['instance_methods']&.each do |m| %>
<li><a href="{{ '/api/<%= source.gsub('::', '/') %>/' | relative_url }}#method-<%= m %>" class="inherited-instance-method">#<%= h m %></a></li>
<% end %>
</ul>
</div>
<% end %>
</div>
<% end %>

<% if included_by.any? || extended_by.any? || inherited_by.any? %>
<div class="used-by-section">
<h6>Used By</h6>
<% if included_by.any? %>
<div class="used-by-group">
<span class="used-by-label">Included by:</span>
<ul class="used-by-list">
<% included_by.each do |path| %>
<li><a href="{{ '/api/<%= path.gsub('::', '/') %>/' | relative_url }}"><%= h path %></a></li>
<% end %>
</ul>
</div>
<% end %>
<% if extended_by.any? %>
<div class="used-by-group">
<span class="used-by-label">Extended by:</span>
<ul class="used-by-list">
<% extended_by.each do |path| %>
<li><a href="{{ '/api/<%= path.gsub('::', '/') %>/' | relative_url }}"><%= h path %></a></li>
<% end %>
</ul>
</div>
<% end %>
<% if inherited_by.any? %>
<div class="used-by-group">
<span class="used-by-label">Subclasses:</span>
<ul class="used-by-list">
<% inherited_by.each do |path| %>
<li><a href="{{ '/api/<%= path.gsub('::', '/') %>/' | relative_url }}"><%= h path %></a></li>
<% end %>
</ul>
</div>
<% end %>
</div>
<% end %>

<% if doc['class_methods']&.any? %>
<h2 id="class-methods">Class Methods <a href="#" class="jump-top" title="Back to top">↑</a></h2>
<% grouped_class = doc['class_methods'].group_by { |m| m['group'] } %>
<% grouped_class.each do |group_name, methods| %>
<% if group_name %>
<h4 class="method-group"><%= h group_name %></h4>
<% end %>
<% methods.each do |method| %>
<%= render_method(method) %>
<% end %>
<% end %>
<% end %>

<% if doc['instance_methods']&.any? %>
<h2 id="instance-methods">Instance Methods <a href="#" class="jump-top" title="Back to top">↑</a></h2>
<% grouped_instance = doc['instance_methods'].group_by { |m| m['group'] } %>
<% grouped_instance.each do |group_name, methods| %>
<% if group_name %>
<h4 class="method-group"><%= h group_name %></h4>
<% end %>
<% methods.each do |method| %>
<%= render_method(method) %>
<% end %>
<% end %>
<% end %>

<% if doc['attributes']&.any? %>
<h2 id="attributes">Attributes <a href="#" class="jump-top" title="Back to top">↑</a></h2>
<% doc['attributes'].each do |attr| %>
<%= render_attribute(attr) %>
<% end %>
<% end %>
